#!/bin/bash
STARTING_POSITION=$(pwd)

ARFF_FILE=$(realpath $1)
ARRF_NAME="${ARFF_FILE##*/}"
ARRF_NAME="${ARRF_NAME%.*}"
TAKE_ATTRIBUTE=$2
MIN_SUP=$3
ITERATION_COUNT=$4
TOPK_COUNT=$5
MAX_REDUNDANCY=$6
MEASURE_PARAM=$7
REDUNDANCY_MEASURE_PARAM=$8

mkdir -p "results"
BASE_RESULT_FOLDER_NAME="results/""$ARRF_NAME""_""$TAKE_ATTRIBUTE""_"$MIN_SUP"_""$TOPK_COUNT""_""$MAX_REDUNDANCY""_""$REDUNDANCY_MEASURE_PARAM"
mkdir -p $BASE_RESULT_FOLDER_NAME
BASE_RESULT_FOLDER_NAME2="$BASE_RESULT_FOLDER_NAME""/""$ITERATION_COUNT"
mkdir -p $BASE_RESULT_FOLDER_NAME2
RESULT_FOLDER_NAME="$BASE_RESULT_FOLDER_NAME2""/""$MEASURE_PARAM"
mkdir -p $RESULT_FOLDER_NAME
DESTINATION="$STARTING_POSITION/$RESULT_FOLDER_NAME/"

cd ../../jars/MCTS/

./run.sh $ARFF_FILE $TAKE_ATTRIBUTE $MIN_SUP $ITERATION_COUNT $TOPK_COUNT $MAX_REDUNDANCY $MEASURE_PARAM $REDUNDANCY_MEASURE_PARAM

mv result.log $DESTINATION 
mv support.log $DESTINATION
mv mcts-$ITERATION_COUNT.csv $DESTINATION/measures.csv
mv XBeta.csv $DESTINATION
mv LBeta.csv $DESTINATION
mv conf.conf $DESTINATION
